懸浮翻譯軟體（Floating Translator — MVP）
專案名稱： 懸浮翻譯軟體（Floating Translator — MVP）

摘要（Abstract）
本文提出一個以 Python 開發之懸浮翻譯軟體最小可行產品（MVP）。該軟體支援：從剪貼簿擷取使用者選取文字、以全域快速鍵觸發、串接 LLM（範例採用 OpenAI Chat Completions）進行翻譯，並於懸浮視窗顯示譯文。本文檔提供安裝、設定、執行、程式模組說明及後續改進建議，便於評估功能正確性、使用者體驗與系統可延展性。

關鍵詞： 懸浮視窗、翻譯、LLM、Python、MVP

目錄
專案簡介

功能一覽

系統需求

檔案結構

安裝與設定（VS Code 範例）

執行方式

使用說明

開發/實作細節

測試項目

未來改進方向

版權與授權

聯絡資訊

專案簡介
Floating Translator 為一個以 Python 撰寫之桌面應用（MVP），目標提供快速、簡潔之即時翻譯體驗：使用者在任一應用程式選取文字並複製後，按下全域快速鍵即可喚起懸浮視窗並顯示目標語言譯文。系統可串接雲端 LLM（示範以 OpenAI API），並支援簡易語言偵測。

功能一覽
全域快速鍵觸發（預設 Ctrl+Shift+T）

從剪貼簿讀取選取文字並自動翻譯

懸浮視窗顯示原文與譯文（支援滑鼠拖曳）

非同步 API 呼叫以避免介面阻塞

簡易複製譯文按鈕

支援語言偵測（使用 langdetect）

系統需求
作業系統： Windows / macOS / Linux（各平台可能需額外授權以使用全域鍵盤攔截）

Python： 3.10 或更新版本（建議 3.10+）

建議硬體： 具穩定網路連線以呼叫雲端 LLM API

必要套件（requirements）：

PySide6

httpx

openai

langdetect

keyboard

pyperclip

注意： keyboard 套件在 macOS/某些 Linux 環境上可能需要額外權限或替代套件（如 pynput）。

檔案結構（範例）
text
├── mvp_translate.py      # 單一檔案 MVP 主程式
├── requirements.txt      # 依賴套件清單
├── README.md             # 本檔案
├── .gitignore            # 建議忽略項（.venv、.env、pycache 等）
└── appendix/             # （選用）附錄：完整程式碼、測試資料、報告附件
安裝與設定（VS Code 範例）
下列步驟與「專題報告格式說明.docx」提供之專案管理建議相容，建議以虛擬環境來確保可重現性。

開啟專案資料夾於 VS Code。

建立虛擬環境（於 Terminal 執行）：

Windows（PowerShell）：

bash
python -m venv .venv
macOS / Linux：

bash
python3 -m venv .venv
啟用虛擬環境：

Windows（PowerShell）： .\.venv\Scripts\Activate.ps1

macOS / Linux： source .venv/bin/activate

選擇解譯器：在 VS Code 透過 Command Palette（Ctrl/Cmd+Shift+P）選擇 Python: Select Interpreter，選擇剛建立之 .venv。

安裝依賴套件：

bash
pip install -r requirements.txt
或者手動安裝：

bash
pip install PySide6 httpx openai langdetect keyboard pyperclip
設定 OpenAI API Key（環境變數 OPENAI_API_KEY）：

macOS / Linux：

bash
export OPENAI_API_KEY="sk-..."
Windows（PowerShell）：

powershell
setx OPENAI_API_KEY "sk-..."
警告： 請勿將金鑰硬編於程式碼中，且在版本控制中避免上傳金鑰（請設定 .gitignore 排除 .env 檔）。

執行方式
在已啟用虛擬環境之終端執行：

bash
python mvp_translate.py
使用流程
在任一應用程式中選取文字並複製（Ctrl+C / Cmd+C）。

按下全域快速鍵（預設 Ctrl+Shift+T），或直接在懸浮視窗貼上文字並按「翻譯」。

懸浮視窗顯示譯文，按「複製譯文」可將譯文放到剪貼簿。

使用說明（提示）
macOS 權限： 若使用全域快速鍵，可能需至「系統偏好設定 → 安全性與隱私 → 隱私」授予「輸入監控」或輔助功能權限；否則全域鍵盤攔截可能失效。

剪貼簿提示： 若剪貼簿為空，按熱鍵時會提示請先複製文字。

錯誤處理： 若 API 回應逾時或錯誤，視窗將顯示錯誤訊息；伺服器錯誤或速率限制請依照 OpenAI 錯誤代碼處理。

開發 / 實作細節（概要）
GUI： 使用 PySide6 實作懸浮無框視窗，設定 WindowStaysOnTopHint 與 FramelessWindowHint。視窗支援滑鼠拖曳功能。

非同步處理： 使用 QThread 包裝 asyncio 以在背景執行 httpx 非同步呼叫，避免阻塞主 GUI 執行緒。

翻譯邏輯： 透過 OpenAI Chat Completions API 發送 system + user messages 以要求翻譯，並保留程式碼區塊與原始格式。

語言偵測： 使用 langdetect 套件作為簡易偵測方案。

快取/歷史： MVP 版本暫未包含，建議後續以 SQLite 或 JSON 實作歷史儲存與快取功能。

安全性： API Key 僅從環境變數讀取，確保安全性。

測試項目（建議）
功能測試： 驗證擷取並翻譯不同語言句子（短句、段落、含程式碼區塊）的正確性。

效能測試： 測量從觸發快速鍵到顯示結果之延遲（毫秒級別）。

穩定性測試： 進行連續多次翻譯測試、模擬網路中斷或 API 錯誤情境。

使用者測試： 蒐集易用性與操作滿意度回饋。

未來改進方向
 直接讀取選取文字： 無需手動複製，透過平台 API（Windows UI Automation、macOS Accessibility）直接獲取選取內容。

 OCR 支援： 整合 pytesseract 或 PaddleOCR 以處理圖片或無法複製的截圖文字。

 歷史紀錄與快取： 實作譯文歷史與快取機制，降低 API 成本並提升離線可用性。

 本地 LLM 支援： 支援本地推論（例如 Llama 3 via llama.cpp 或 Ollama）以提升隱私與降低成本。

 進階設定介面： 提供模型選擇、目標語言設定、快捷鍵自訂及隱私選項。

 打包發布： 使用 PyInstaller 打包成執行檔，並提供跨平台安裝程式。

版權與授權
本專案原始碼（MVP）採用 MIT License（或依貴團隊決定之授權條款）。若需改用其他授權（例如 GPL），請在此區更新相關資訊。

MIT License
text
Copyright (c) 2025 [你的團隊名稱]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
注意事項（合規與倫理）
本專案若使用第三方 LLM API（如 OpenAI），請遵守其服務條款與資料使用政策。

若處理敏感資訊，請勿上傳至第三方伺服器或應事先經使用者同意。

在報告與發表中引用他人資料時，請依 APA 格式列出參考文獻。

範例貢獻指南（CONTRIBUTING）
Fork 本儲存庫後建立 feature 分支（例如 feature/gui-improve）。

提交 Pull Request 時請說明修改內容、測試方式與影響面。

請勿提交包含私人 API Key 或其他機敏資訊的檔案。

聯絡資訊
若需技術支援或合作洽談，請聯絡：

作者： 王大文（請改為實際作者）

單位： 國立中央大學 資訊工程研究所（請改為實際單位）

電子郵件： first_author@institution.edu